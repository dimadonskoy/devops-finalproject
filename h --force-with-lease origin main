6ee69faee259a4cbde51f3f063d4ec5c8c2a9a03:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,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',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
4e0efd50c5f5660c571f3e773a1c0d2a46ff75c7:provider/scripts/provision_vars.sh[36m:[m45[36m:[m#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry
4e0efd50c5f5660c571f3e773a1c0d2a46ff75c7:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,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',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
df712c561515ede2fda5817c88c36b52ce4e6f6a:provider/scripts/provision_vars.sh[36m:[m45[36m:[m#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry
df712c561515ede2fda5817c88c36b52ce4e6f6a:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAABjFJREFUeF7tnGtsFFUUx/8zu7OP0lrAiFIEwSIEHxCJkNSmxSba2BTjM0bRxBjRxIag8QHRDxj8QvCRQKMYFWM0BoNB0EDFgEmlWkrAYFoFUtIiD4OiYilgd2d3dsfMDFl2Zh8zd9cpJ+bMt3bu3Puf/2/OnHvunVY6t368Dj7IOCAxEDIsTCEMhBYPBkKMBwNhINQcIKaHcwgDIeYAMTkcIQyEmAPE5HCEMBBiDhCTwxHCQIg5QEwORwgDIeYAMTkcIQyEmAPE5HCEMBBiDhCTwxHCQIg5QEwORwgDIeYAMTkcIQyEmAPE5HCEMBBiDhCTwxHCQIg5QEwORwgDIeYAMTmXPEKC0+5GuP5NSOFxGWtSv/cg1rFQ2KpATQMiC96BVDHRvFZPnoe6+0VoA58J9xWa+xJCc5YCcsi8Nn2mHyOf3yrcj+gFlxxIuP4NKDMfAyQ5o11Xz0DtWQ5tcJPQ/TAQIbtyG8vVtYjcsQFy9XTHSR3a4GbEv31KaAQGImRXbmNl1hMIzXsFkjIGSKnQE8OQohOs1835E4h3Lkbqjx88j8JAPFuVv2Gk+VMEJzdbAGJ/IXVqD4JTW40/7ALSCSR625HYv8rzKAzEs1W5DQMTbkGkaT2kyslW0hw6iORP6xCqWwVJqTJ/J5rcGUgZQELzViB0YxsgK0Z8IHl4AxJ7Xka0dSvky2dbUSOY3BlIGUCiC7cjcOV8y/jkP0jsW4nkoQ9gn3WJJXcGUiKQYO0DCNethhQea72uhgcQ37kI6eFBOOsSkeTOQEoEEm5ohzJjkZW89TSS/R9B7X4h01u0dRsCV9VZP6eTSPy8Dol9r7qOxkBcLcpt4Kw98uUJe34B0qf7EOu4y6y8ix0MpAQgodlLEZq7HAhErJnUqb2IbWux9eScgXlN7gykBCDZtUex15GtHbwldwYiCCRw9e2INL4FKXqFNbsa+Q3xXU8jdfK7nJ6U6xdbVXywwmrroXJnIIJAnLlBO7ED8R0P5+0lZ53LQ3JnIAJAJKXSVvQhFUdi/2ok+toL9uJcCXZL7gxEAEix2qNQN85rsgvIfNcwEAEgkdveQ7D2Pqv2KOPQjn+N+M5H8vbAQDwaa+aD5o2QL5vm8YrCzYold1+BDB3EyOaGsvW7dTAqO4ahOc8idPMyIBB20+N+3iW5V9y/G/LYmVY/HvJUoQHDDWuhzHg0czp1sgux7fe66yuzxagAibZsQaCm8YJUHdqRL2DMsLweynUPIVCzINO8WHKvuKczs1qMtIbkgXeh7l3hdahMu+idmxCY1JT5WTuyxdww8/vwHUhO7SG4pG4Y4KzuiyV3Y48leO3FJ7mUJzvnFVsGWFGAvgMJ170GZdbjmY8Y3Kau+W4g3957oRrG+bWIsROpdj8H7ViHZ2+cr1hdHYLa/Ty0X7703EepDX0FklN7GCu7hz6E2rNMWK9thdjc8v0T8a4lSP36ja0v5zqYcTL99wHEO580P+VxO4zrjbEyeci43uPiplvfXs77CsT2EcOFfXP1+2dgTF1FD2dNUiw/RBrfRnD6g1mfFulInz2KZO8aJA9/UnBoQ69yUxvkqqkX2xgTgx9fR6J3jajkktr7CsRZe4jukTvvKHuX0XzyCzy5xtMdaXof8vgbHF3o0GOnkT47AP3cceucrMB4JUqVUyCFq+11kp4yvw2L72orydxSLvINSM6rw8NalNsNONfCiiX3wMR6GPlLHmdMgUsoRg0Yx76C2rXEdR/GTbfIed+A5CTXIiu7XgXnyw/FFiilMTUIz1+J4JQWIBj1Ooz5SVLS2KXsW+v5mv+qoW9AbNuwgFl3FFrZFbkZ+z5J4eSe3acBxsgPwUlNkKqugTHZgBzMyhOqGQXGnr52dCu0/o9HNSpsWvl/v4s8Dv639S1C/Jf+/xyBgRDjykAYCDEHiMnhCGEgxBwgJocjhIEQc4CYHI4QBkLMAWJyOEIYCDEHiMnhCGEgxBwgJocjhIEQc4CYHI4QBkLMAWJyOEIYCDEHiMnhCGEgxBwgJocjhIEQc4CYHI4QBkLMAWJyOEIYCDEHiMnhCGEgxBwgJocjhIEQc4CYHI4QBkLMAWJyOEIYCDEHiMnhCGEgxBwgJudfyppWITuTe24AAAAASUVORK5CYII=',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
6ee69faee259a4cbde51f3f063d4ec5c8c2a9a03:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,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',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
4e0efd50c5f5660c571f3e773a1c0d2a46ff75c7:provider/scripts/provision_vars.sh[36m:[m45[36m:[m#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry
4e0efd50c5f5660c571f3e773a1c0d2a46ff75c7:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,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',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
df712c561515ede2fda5817c88c36b52ce4e6f6a:provider/scripts/provision_vars.sh[36m:[m45[36m:[m#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry
df712c561515ede2fda5817c88c36b52ce4e6f6a:provider/terraform.tfstate[36m:[m59[36m:[m                "content": "#!/usr/bin/env bash\n\n# Fail if one command fails\nset -e\n\n# Run the script in non-interactive mode so that the installation does not \n# prompt for input\nexport DEBIAN_FRONTEND=noninteractive\n\n# Install required packages\napt-get update\napt-get install -y ca-certificates curl sqlite3 apache2-utils\n\n# Setup Docker\n\n## Add Docker's official GPG key:\ninstall -m 0755 -d /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc\nchmod a+r /etc/apt/keyrings/docker.asc\n\n## Add the repository to Apt sources:\necho \\\n  \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \\\n  $(. /etc/os-release \u0026\u0026 echo \"$VERSION_CODENAME\") stable\" | \\\n  tee /etc/apt/sources.list.d/docker.list \u003e /dev/null\napt-get update\n\n## Install Docker\napt-get install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n\n# Install the open_web_ui UI Server\nmkdir -p /etc/open-webui.d/\n\n## Create the default db with an intial user\n## Open WebUI uses SQLite as the default database, when first run it allows anyone to create an admin account\n## since we are runnning this in a cloud environment, we need to create an admin account before starting the server.\n## At present the only way to do this is to create the database with an admin account already created.\n\nPASSWD=$(htpasswd -bnBC 10 \"\" \"MuS6z2uMROXTScNW\" | tr -d ':\\n')\nUSER=\"admin@demo.gs\"\nsudo usermod -aG docker openwebui\nnewgrp docker\n\n# Start Open Web UI for the first time so that it creates the database\n#docker login ghcr.io -u yairk-create --password [1;31m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[m # login to GitHub Container Registry\n/usr/bin/docker pull ghcr.io/open-webui/open-webui:ollama\n/usr/bin/docker run -d -p 80:8080 -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name openwebui ghcr.io/open-webui/open-webui:ollama\n\n# Wait for the server to start\ntimeout 300 bash -c 'while [[ \"$(curl -s -o /dev/null -w ''%{http_code}'' localhost)\" != \"200\" ]]; do sleep 5; done' || false\n\n# Stop the server\n/usr/bin/docker container stop openwebui\n/usr/bin/docker container rm openwebui\n\n# Update the database with the admin user\ncat \u003c\u003c EOF \u003e /etc/open-webui.d/webui.sql\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nINSERT INTO auth VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','${USER}','${PASSWD}',1);\nINSERT INTO user VALUES('488af2d3-dd38-4310-a549-6d8ad11ae69e','Admin User','${USER}','admin','data:image/png;base64,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',NULL,1719901984,1719901984,1719901984,'null','null',NULL);\nCOMMIT;\nEOF\n\nsqlite3 /etc/open-webui.d/webui.db \u003c /etc/open-webui.d/webui.sql\n\n# Cleanup\nrm -f /etc/open-webui.d/webui.sql\n\n\n# Create the environment file that will be loaded by systemd\necho \"#Environment\" \u003e /etc/open-webui.d/openwebui.env\n\n\n\n# If the GPU is enabled, then we need to install the Nvidia drivers and the\n# Nvidia Container Toolkit\n\n\n## Create the systemd unit\n## When starting systemd will load the environment file and pass the variables to the container\ncat \u003c\u003c 'EOF' \u003e /etc/systemd/system/openwebui.service\n[Unit]\nDescription=Open Web UI\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nType=simple\nRestart=always\nEnvironmentFile=/etc/open-webui.d/openwebui.env\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStart=/usr/bin/docker run -p 80:8080 $GPU_FLAG $OPENAI_KEY $OPENAI_BASE -e RAG_EMBEDDING_MODEL_AUTO_UPDATE=true -v /etc/open-webui.d:/root/.open_web_ui -v /etc/open-webui.d:/app/backend/data --name %n ghcr.io/open-webui/open-webui:ollama\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n## Reload systemd and enable the service\nsystemctl daemon-reload\nsystemctl enable openwebui.service\n\nreboot",
